## -*- sh -*-
## incomplete.test -- Test incomplete command handling

# Common definitions
if test -z "$srcdir"; then
    srcdir=echo "$0" | sed 's,[^/]*$,,'
    test "$srcdir" = "$0" && srcdir=.
    test -z "$srcdir" && srcdir=.
    test "${VERBOSE+set}" != set && VERBOSE=1
fi
echo 1..6
. $srcdir/defs.sh
pexec $RUNCOLORSCREEN render --mode original --geometry scan --output-profile=original "$srcdir/checkerboard.tif" "$srcdir/empty.par"  "out-render-chekerboard.tif" || exit 1
echo 'ok 1 - rendering checkerboard'
#image is 8-bit; compare two 16bit images.
pexec $RUNCOLORSCREEN render --mode original --geometry scan --output-profile=original "out-render-chekerboard.tif" "$srcdir/empty.par" "out2-render-checkerboard.tif"|| exit 1
echo 'ok 2 - rendering checkerboard 2'
pexec $RUNCOLORSCREEN lab compare-images "out-render-chekerboard.tif" "out2-render-checkerboard.tif" || exit 1
echo 'ok 3 - compare'

NAME=dufaycolor_dt_captureone_export
pexec $RUNCOLORSCREEN render --mode original --geometry scan --output-profile=original "$srcdir/${NAME}_tile1.jpg" "$srcdir/empty.par"  "out-render-${NAME}.tif" || exit 1
echo 'ok 4 - rendering scan'
#image is 8-bit; compare two 16bit images.
pexec $RUNCOLORSCREEN render --mode original --geometry scan --output-profile=original "out-render-${NAME}.tif" "$srcdir/empty.par" "out2-render-${NAME}.tif"|| exit 1
echo 'ok 5 - rendering scan 2'
pexec $RUNCOLORSCREEN lab compare-images "out2-render-${NAME}.tif" "out-render-${NAME}.tif" || exit 1
echo 'ok 6 - compare'
